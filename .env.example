# Microsoft Fabric CI/CD Environment Configuration
# Copy this file to .env and update with your actual values
# DO NOT commit .env file to version control

# ============================================================================
# Azure Authentication (Required)
# ============================================================================

# Azure Service Principal credentials for Fabric API access
AZURE_CLIENT_ID=your-service-principal-client-id
AZURE_CLIENT_SECRET=your-service-principal-secret
AZURE_TENANT_ID=your-azure-tenant-id
AZURE_SUBSCRIPTION_ID=your-azure-subscription-id

# ============================================================================
# Microsoft Fabric Configuration (Required)
# ============================================================================

# Fabric workspace names (will be generated dynamically from project config)
# These are examples - actual names come from project.config.json
FABRIC_DEV_WORKSPACE=your-prefix-fabric-dev
FABRIC_TEST_WORKSPACE=your-prefix-fabric-test  
FABRIC_PROD_WORKSPACE=your-prefix-fabric-prod

# Fabric Capacity ID (Required for creating lakehouses/warehouses)
# Get from: Fabric Portal → Settings → Admin portal → Capacity settings
# Format: GUID (e.g., abc12345-def6-7890-ghij-klmnopqrstuv)
FABRIC_CAPACITY_ID=your-fabric-capacity-id

# Fabric Deployment Pipeline ID (optional, for deployment pipelines)
FABRIC_DEPLOYMENT_PIPELINE_ID=your-deployment-pipeline-id

# ============================================================================
# GitHub Configuration (Required for CI/CD)
# ============================================================================

# GitHub Personal Access Token with repo and workflow permissions
GITHUB_TOKEN=ghp_your-github-personal-access-token

# GitHub organization and repository (auto-detected from git remote)
GITHUB_ORGANIZATION=your-github-org
GITHUB_REPOSITORY=your-repo-name

# ============================================================================
# Data Governance Configuration (Optional)
# ============================================================================

# Email addresses for data contract placeholders
DATA_OWNER_EMAIL=data-owner@your-company.com
TECHNICAL_LEAD_EMAIL=tech-lead@your-company.com
DATA_ENGINEERING_EMAIL=data-engineering@your-company.com
FINANCE_TEAM_EMAIL=finance-team@your-company.com
INVENTORY_TEAM_EMAIL=inventory-team@your-company.com

# Data classification levels
DEFAULT_DATA_CLASSIFICATION=internal
PII_DATA_CLASSIFICATION=restricted

# ============================================================================
# Power BI Integration (Optional)
# ============================================================================

# Power BI workspace and app IDs
POWERBI_WORKSPACE_ID=your-powerbi-workspace-id
POWERBI_APP_ID=your-powerbi-app-id

# Power BI service principal (can reuse Fabric credentials)
POWERBI_CLIENT_ID=${AZURE_CLIENT_ID}
POWERBI_CLIENT_SECRET=${AZURE_CLIENT_SECRET}

# ============================================================================
# Microsoft Purview Integration (Optional)
# ============================================================================

# Purview account details
PURVIEW_ACCOUNT_NAME=your-purview-account
PURVIEW_ENDPOINT=https://your-purview-account.purview.azure.com

# Purview authentication (can reuse Azure credentials)
PURVIEW_CLIENT_ID=${AZURE_CLIENT_ID}
PURVIEW_CLIENT_SECRET=${AZURE_CLIENT_SECRET}

# ============================================================================
# Great Expectations Configuration (Optional)
# ============================================================================

# Great Expectations store configuration
GX_STORE_BACKEND=azure_blob_storage
GX_AZURE_STORAGE_ACCOUNT=your-storage-account
GX_AZURE_CONTAINER=great-expectations

# ============================================================================
# Notification Configuration (Optional)
# ============================================================================

# Teams webhook for deployment notifications
TEAMS_WEBHOOK_URL=https://your-org.webhook.office.com/webhookb2/your-webhook-id

# Email SMTP configuration for alerts
SMTP_SERVER=smtp.your-company.com
SMTP_PORT=587
SMTP_USERNAME=alerts@your-company.com
SMTP_PASSWORD=your-smtp-password

# ============================================================================
# Development Configuration (Optional)
# ============================================================================

# Local development settings
DEBUG_MODE=false
LOG_LEVEL=INFO
ENVIRONMENT=development

# Skip certain validations in development
SKIP_FABRIC_VALIDATION=false
SKIP_PURVIEW_SCAN=false
SKIP_POWERBI_DEPLOYMENT=false

# ============================================================================
# Security Configuration (Optional)
# ============================================================================

# Key Vault configuration for secrets management
KEY_VAULT_NAME=your-key-vault
KEY_VAULT_SECRET_PREFIX=fabric-cicd

# Certificate paths for enhanced security
CERT_PATH=/path/to/certificate.pem
CERT_KEY_PATH=/path/to/private-key.pem

# ============================================================================
# Testing Configuration (Optional)
# ============================================================================

# Test environment overrides
TEST_FABRIC_WORKSPACE=your-prefix-fabric-test
TEST_DATA_SIZE_LIMIT=1000
INTEGRATION_TEST_TIMEOUT=300

# Mock services for testing
MOCK_FABRIC_API=false
MOCK_PURVIEW_API=false

# ============================================================================
# Monitoring and Logging (Optional)
# ============================================================================

# Application Insights configuration
APPINSIGHTS_INSTRUMENTATION_KEY=your-app-insights-key
APPINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://region.in.applicationinsights.azure.com/

# Log Analytics workspace
LOG_ANALYTICS_WORKSPACE_ID=your-log-analytics-workspace-id
LOG_ANALYTICS_SHARED_KEY=your-log-analytics-key

# ============================================================================
# Example Values (Replace with your actual values)
# ============================================================================

# Example for a company called "Contoso"
# AZURE_CLIENT_ID=12345678-1234-1234-1234-123456789012
# AZURE_TENANT_ID=87654321-4321-4321-4321-210987654321
# FABRIC_DEV_WORKSPACE=contoso-fabric-dev
# FABRIC_CAPACITY_ID=abcd1234-5678-90ef-ghij-klmnopqrstuv
# DATA_OWNER_EMAIL=data-team@contoso.com
# GITHUB_ORGANIZATION=contoso
# GITHUB_REPOSITORY=fabric-analytics

# ============================================================================
# Security Notes
# ============================================================================

# 1. Never commit this file with real values to version control
# 2. Use Azure Key Vault for production secrets
# 3. Rotate credentials regularly
# 4. Use service principals with minimal required permissions
# 5. Enable conditional access policies for service principals
# 6. Monitor service principal usage in Azure AD logs

# ============================================================================
# Quick Setup Guide
# ============================================================================

# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Update the required Azure and GitHub values
#
# 3. Run the setup script to validate configuration:
#    ./setup.sh
#
# 4. Initialize project configuration:
#    python init_project_config.py
#
# 5. Test the configuration:
#    python -c "from ops.scripts.utilities.config_manager import ConfigManager; cm = ConfigManager(); print('✅ Configuration loaded successfully')"